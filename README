REWRITE IN PROGRESS
-------------------

Status:

'deconvolve' now has a lot of command line options. It takes one named input
file to deconvolve. It will automatically output readable ansi decoded teletext
if you allow the output to go to the console. If you redirect the output it
will produce raw t42 packets. You can override this behaviour.

It can also filter the output by magazine and/or row. The filtered packets are
not fully deconvolved. You can also have the output numbered by position in
the input file. The number is in number of packets, so if your input is
2048 byte lines, the file offset is n*2048.

Those last two options are useful if you want to quickly scan through a whole
tape dump, when the tape has multiple recordings on it. There is a shortcut for
this, -H, which will dump all headers, numbered.

You can use the header numbers with the --start and --stop arguments to process
the selected range of lines.

CUDA will be automatically detected and used, but can be forced off. You can
also configure the number of worker threads. Number of threads doesn't include
the main thread. --threads 0 will cause all work to be done on the main thread
which is slower even on a single core, but useful for debugging. When using the
CPU, set threads to the number of cores you have. When using CUDA, you will
need to experiment to find the best number of threads.

Run
    ./convolve -h
to see all the options.


USAGE
-----

In order to use CUDA decoding you need to use the Nvidia proprietary driver:

https://help.ubuntu.com/community/BinaryDriverHowto/Nvidia#Installation

Next install python dependencies:

    sudo apt-get install python-numpy python-scipy python-pycuda
    pip install --user scikit-cuda

Extract headers from your dump file:

    ./deconvolve input.vbi -H > headers.txt

Examine headers to find services:

    less -r headers.txt

Deconvolve a part of the input corresponding to one service:

    ./deconvolve input.vbi --start 123 --stop 456 > output.t42

For now you have to process the output.t42 with the old version of
vhs-teletext.

TODO
----

 * Write a tool to capture raw vbi.
 * Port over the post-processing tools.
